{% extends 'bases/library.html' %}

{% load static %}
{% load compress %}

{% block title %}
  Cursos
{% endblock %}

{% block head %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  {% compress css %}
  <link rel="stylesheet" href="{% static 'css/courses/view_courses.css' %}" />
  {% endcompress %}
{% endblock %}

{% block content %}
  <section class="course-info">
    <div class="info">
      <p class="breadcrumb" style="padding-bottom: 20px;">
        <span>Cursos</span> > <span>Categorias</span> > <span>{{ course.get_category_display }}</span>
      </p>

      <h1 class="course-title">{{ course.name }}</h1>
      <p class="course-description">{{ course.description }}</p>

      <div class="rating" style="margin-bottom: 5px;">
        <span class="stars" style="color: #F5A623;">{{ course.get_stars_in_percentage }}% <i class="bi bi-star-fill"></i></span>
        <span class="reviews" style="color: gray;">({{ course.stars.count }} avaliações)</span>
      </div>

      <p class="teacher" style="margin-bottom: 5px;">
        Criado por <span style="text-decoration: underline;color:rgb(140, 147, 242);cursor: pointer;">{{ course.teacher }}</span>
      </p>

      <div style="display: flex;justify-content: start; gap: 8px;">
        <p class="updated-at" style="color:rgb(243, 188, 100);">
          <i class="bi bi-calendar-date"></i> Última atualização em {{ course.updated_at|date:'m/y' }}
        </p>

        <p class="language">
          <i class="bi bi-globe2"></i> {{ course.get_language_display }}
        </p>
      </div>
    </div>

    <div class="preview">
      <div class="video-container">
        <img class="video-thumbnail" src="{{ course.preview.cover.url }}" alt="Capa do curso" />
      </div>
    </div>
  </section>

  <div class="video-list">
    {% for video in videos %}
      <div class="video-card">
        <a href="{% url 'watch_video' video.slug %}">
          <div class="video-content">
            <video class="video-item" poster="{{ video.cover.url }}" src="{{ video.path.url }}" controls></video>
            <h2 class="video-title">{{ video }}</h2>
          </div>
        </a>
      </div>
    {% endfor %}
  </div>
{% endblock %}
