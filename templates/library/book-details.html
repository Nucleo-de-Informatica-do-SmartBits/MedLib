{% extends 'bases/library.html' %}
{% load static %}
{% load compress %}

{% block title %}
  {{ book.title }}
{% endblock %}

{% block head %}
  {% compress css %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link rel="stylesheet" href="{% static 'css/library/book-details.css' %}" />
  {% endcompress %}
{% endblock %}

{% block content %}
  <main id="book-details">
    <div class="container">
      <div class="book-cover">
        <img src="{{ book.cover.url }}" alt="{{ book.title }}" />
        <br /><hr />
      </div>
      <div class="book-layout">
        <div class="book-info">
          <div style="display: flex;justify-content: space-between;align-items: center;">
            <h1 class="book-title">{{ book.title }}</h1>
            <a href=""><button class="bn53"><span>Ler Livro</span></button></a>
          </div>
          <p class="book-author">
            by{% for author in book.authors.all %}
              <a href="" class="author_link">{{ author.get_full_name }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </p>

          <div>
            <div class="book-rating" style="margin-top: 10px;margin-bottom:15px;">
              {% for category in book.categories.all %}
                <span class="badge" style="background-color: {{ category.color }};" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">{{ category.name }}</span>
              {% endfor %}
            </div>
            <div class="book-stars"></div>
          </div>
          <hr />
          <p class="book-summary">{{ book.summary }}</p>
          <hr />
          <div class="book-details">
            <div class="detail">
              <span>Data de Publica칞칚o</span>
              <i class="bi bi-calendar2-week"></i>
              <span class="detail-value">{{ book.publication_date }}</span>
            </div>
            <div class="detail">
              <span>Idioma</span>
              <i class="bi bi-globe-americas"></i>
              <span class="detail-value">{{ book.get_language_display }}</span>
            </div>
            <div class="detail">
              <span>P치ginas</span>
              <i class="bi bi-file-earmark-text"></i>
              <span class="detail-value">{{ book.pages }}</span>
            </div>
            <div class="detail">
              <span>Editora</span>
              <i class="bi bi-buildings"></i>
              <span class="detail-value">{{ book.publisher.name }}</span>
            </div>
            <div class="detail">
              <span>ISBN-13</span>
              <i class="bi bi-upc-scan"></i>
              <span class="detail-value">{{ book.isbn }}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="comments">
        <h1>Coment치rios</h1>
        <hr />
        <div class="comment-input">
          <input type="text" placeholder="Escreva um coment치rio..." />
          <button class="submit-btn">Enviar</button>
        </div>
        <hr />
        <div class="comment">
          <h3 class="comment-author">Jo칚o Silva</h3> <!-- Nome do autor -->
          <p class="comment-text">Gostei muito desse artigo, foi muito 칰til!</p> <!-- Texto do coment치rio -->
          <div class="comment-actions">
            <span class="likes">游녨 12</span> <!-- N칰mero de likes -->
            <span class="dislikes">游녩 2</span> <!-- N칰mero de dislikes -->
          </div>
        </div>

        <div class="comment">
          <h3 class="comment-author">Maria Oliveira</h3>
          <p class="comment-text">Achei interessante, mas poderia ter mais detalhes.</p>
          <div class="comment-actions">
            <span class="likes">游녨 8</span>
            <span class="dislikes">游녩 1</span>
          </div>
        </div>
      </div>
    </div>  
  </main>

  {% compress js %}
  <script>
    document.querySelector('.submit-btn').addEventListener('click', function () {
      let button = this
    
      let loader = document.createElement('span')
      loader.classList.add('loader')
    
      button.innerHTML = 'Enviando'
      button.appendChild(loader)
    
      setTimeout(() => {
        button.innerHTML = 'Enviar'
      }, 2000)
    })
  </script>

  {% endcompress %}
{% endblock %}
